CREATE TABLE ALUMNO (ID INTEGER NOT NULL, ALUMNOMOVILIDAD BOOLEAN, CODIGOPOSTAL INTEGER, DIRECCION VARCHAR, DNI VARCHAR UNIQUE, EMAILINSTITUCIONAL VARCHAR NOT NULL, EMAILPERSONAL VARCHAR, LOCALIDAD VARCHAR, MOVIL VARCHAR, NOMBRECOMPLETO VARCHAR NOT NULL, PROVINCIA VARCHAR, TELEFONO VARCHAR, LOGIN_CODIGO INTEGER, PRIMARY KEY (ID))
CREATE TABLE ASIGNATURA (REFERENCIA INTEGER NOT NULL, DTYPE VARCHAR(31), CARACTER VARCHAR, CODIGO INTEGER NOT NULL, CREDITOS INTEGER NOT NULL, CUATRIMESTRE VARCHAR, CURSO VARCHAR, DURACION VARCHAR, IDIOMASIMPARTICION VARCHAR, NOMBRE VARCHAR NOT NULL, OFERTADA INTEGER NOT NULL, ASIGNATURASTITULACION_CODIGO INTEGER, PRIMARY KEY (REFERENCIA))
CREATE TABLE ASIGNATURASMATRICULA (ASIGNATURA_REFERENCIA INTEGER NOT NULL, GRUPO_ID INTEGER, EXPEDIENTE_NUMEXPEDIENTE INTEGER NOT NULL, CURSOACADEMICO VARCHAR NOT NULL, PRIMARY KEY (ASIGNATURA_REFERENCIA, EXPEDIENTE_NUMEXPEDIENTE, CURSOACADEMICO))
CREATE TABLE CENTRO (ID INTEGER NOT NULL, DIRECCION VARCHAR NOT NULL, NOMBRE VARCHAR UNIQUE, TLFCONSERJERIA INTEGER, PRIMARY KEY (ID))
CREATE TABLE CLASE (DIA DATE NOT NULL, HORAINICIO VARCHAR NOT NULL, HORAFIN VARCHAR, ASIGNATURA_REFERENCIA INTEGER, GRUPO_ID INTEGER NOT NULL, PRIMARY KEY (DIA, HORAINICIO, GRUPO_ID))
CREATE TABLE ENCUESTA (FECHAENVIO VARCHAR NOT NULL, EXPEDIENTEENCUESTA_NUMEXPEDIENTE INTEGER, PRIMARY KEY (FECHAENVIO))
CREATE TABLE EXPEDIENTE (NUMEXPEDIENTE INTEGER NOT NULL, ACTIVO BOOLEAN, CREDITOSCF DOUBLE, CREDITOSFB DOUBLE, CREDITOSOB DOUBLE, CREDITOSOP DOUBLE, CREDITOSPE DOUBLE, CREDITOSSUPERADOS DOUBLE, CREDITOSTF DOUBLE, NOTAMEDIAPROVISIONAL DOUBLE, ALUMNO_ID INTEGER, TITULACION_CODIGO INTEGER, PRIMARY KEY (NUMEXPEDIENTE))
CREATE TABLE GRUPO (ID INTEGER NOT NULL, ASIGNAR VARCHAR, CURSO VARCHAR UNIQUE, INGLES BOOLEAN NOT NULL, LETRA VARCHAR UNIQUE, PLAZAS INTEGER, TURNO VARCHAR NOT NULL, VISIBLE BOOLEAN, GRUPOREFLEX_ID INTEGER, TITULACION_CODIGO INTEGER, PRIMARY KEY (ID))
CREATE TABLE GRUPOPORASIGNATURA (CURSOACADEMICO VARCHAR NOT NULL, OFERTA VARCHAR, ASIGNATURA_REFERENCIA INTEGER NOT NULL, GRUPO_ID INTEGER NOT NULL, PRIMARY KEY (CURSOACADEMICO, ASIGNATURA_REFERENCIA, GRUPO_ID))
CREATE TABLE LOGIN (CODIGO INTEGER NOT NULL, CONTRASENA VARCHAR NOT NULL, ESALUMNO BOOLEAN NOT NULL, USUARIO VARCHAR NOT NULL UNIQUE, ALUMNO_ID INTEGER, PRIMARY KEY (CODIGO))
CREATE TABLE MATRICULA (CURSOACADEMICO VARCHAR NOT NULL, ESTADO VARCHAR, FECHAMATRICULA VARCHAR NOT NULL, LISTADOASIGNATURAS VARCHAR, NUEVOINGRESO BOOLEAN, NUMARCHIVO INTEGER, TURNOPREFERENTE VARCHAR, EXPEDIENTE_NUMEXPEDIENTE INTEGER NOT NULL, PRIMARY KEY (CURSOACADEMICO, EXPEDIENTE_NUMEXPEDIENTE))
CREATE TABLE OPTATIVAS (REFERENCIA INTEGER NOT NULL, MENCION VARCHAR, PLAZAS INTEGER, PRIMARY KEY (REFERENCIA))
CREATE TABLE SOLICITUD (CODIGO INTEGER NOT NULL, DESCRIPCION VARCHAR NOT NULL, FECHASOLICITUD TIMESTAMP NOT NULL, ALUMNO_ID INTEGER, PRIMARY KEY (CODIGO))
CREATE TABLE TITULACION (CODIGO INTEGER NOT NULL, CREDITOS INTEGER NOT NULL, NOMBRE VARCHAR NOT NULL, PRIMARY KEY (CODIGO))
CREATE TABLE Alumno_GRUPOSASIGNADOS (Alumno_ID INTEGER, GRUPOSASIGNADOS VARCHAR)
CREATE TABLE TitulacionCentro (cen_fk INTEGER NOT NULL, titu_fk INTEGER NOT NULL, PRIMARY KEY (cen_fk, titu_fk))
CREATE TABLE GRUPOPORASIGNATURA_ENCUESTA (encuesta_FECHAENVIO VARCHAR NOT NULL, CURSOACADEMICO VARCHAR NOT NULL, ASIGNATURA_REFERENCIA INTEGER NOT NULL, GRUPO_ID INTEGER NOT NULL, PRIMARY KEY (encuesta_FECHAENVIO, CURSOACADEMICO, ASIGNATURA_REFERENCIA, GRUPO_ID))
ALTER TABLE ALUMNO ADD CONSTRAINT FK_ALUMNO_LOGIN_CODIGO FOREIGN KEY (LOGIN_CODIGO) REFERENCES LOGIN (CODIGO)
ALTER TABLE ASIGNATURA ADD CONSTRAINT FK_ASIGNATURA_ASIGNATURASTITULACION_CODIGO FOREIGN KEY (ASIGNATURASTITULACION_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE ASIGNATURASMATRICULA ADD CONSTRAINT FK_ASIGNATURASMATRICULA_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE ASIGNATURASMATRICULA ADD CONSTRAINT FK_ASIGNATURASMATRICULA_CURSOACADEMICO FOREIGN KEY (CURSOACADEMICO, EXPEDIENTE_NUMEXPEDIENTE) REFERENCES MATRICULA (CURSOACADEMICO, EXPEDIENTE_NUMEXPEDIENTE)
ALTER TABLE ASIGNATURASMATRICULA ADD CONSTRAINT FK_ASIGNATURASMATRICULA_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE CLASE ADD CONSTRAINT FK_CLASE_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE CLASE ADD CONSTRAINT FK_CLASE_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE ENCUESTA ADD CONSTRAINT FK_ENCUESTA_EXPEDIENTEENCUESTA_NUMEXPEDIENTE FOREIGN KEY (EXPEDIENTEENCUESTA_NUMEXPEDIENTE) REFERENCES EXPEDIENTE (NUMEXPEDIENTE)
ALTER TABLE EXPEDIENTE ADD CONSTRAINT FK_EXPEDIENTE_TITULACION_CODIGO FOREIGN KEY (TITULACION_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE EXPEDIENTE ADD CONSTRAINT FK_EXPEDIENTE_ALUMNO_ID FOREIGN KEY (ALUMNO_ID) REFERENCES ALUMNO (ID)
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_TITULACION_CODIGO FOREIGN KEY (TITULACION_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_GRUPOREFLEX_ID FOREIGN KEY (GRUPOREFLEX_ID) REFERENCES GRUPO (ID)
ALTER TABLE GRUPOPORASIGNATURA ADD CONSTRAINT FK_GRUPOPORASIGNATURA_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE GRUPOPORASIGNATURA ADD CONSTRAINT FK_GRUPOPORASIGNATURA_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE LOGIN ADD CONSTRAINT FK_LOGIN_ALUMNO_ID FOREIGN KEY (ALUMNO_ID) REFERENCES ALUMNO (ID)
ALTER TABLE MATRICULA ADD CONSTRAINT FK_MATRICULA_EXPEDIENTE_NUMEXPEDIENTE FOREIGN KEY (EXPEDIENTE_NUMEXPEDIENTE) REFERENCES EXPEDIENTE (NUMEXPEDIENTE)
ALTER TABLE OPTATIVAS ADD CONSTRAINT FK_OPTATIVAS_REFERENCIA FOREIGN KEY (REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE SOLICITUD ADD CONSTRAINT FK_SOLICITUD_ALUMNO_ID FOREIGN KEY (ALUMNO_ID) REFERENCES ALUMNO (ID)
ALTER TABLE Alumno_GRUPOSASIGNADOS ADD CONSTRAINT FK_Alumno_GRUPOSASIGNADOS_Alumno_ID FOREIGN KEY (Alumno_ID) REFERENCES ALUMNO (ID)
ALTER TABLE TitulacionCentro ADD CONSTRAINT FK_TitulacionCentro_titu_fk FOREIGN KEY (titu_fk) REFERENCES TITULACION (CODIGO)
ALTER TABLE TitulacionCentro ADD CONSTRAINT FK_TitulacionCentro_cen_fk FOREIGN KEY (cen_fk) REFERENCES CENTRO (ID)
ALTER TABLE GRUPOPORASIGNATURA_ENCUESTA ADD CONSTRAINT FK_GRUPOPORASIGNATURA_ENCUESTA_encuesta_FECHAENVIO FOREIGN KEY (encuesta_FECHAENVIO) REFERENCES ENCUESTA (FECHAENVIO)
ALTER TABLE GRUPOPORASIGNATURA_ENCUESTA ADD CONSTRAINT FK_GRUPOPORASIGNATURA_ENCUESTA_CURSOACADEMICO FOREIGN KEY (CURSOACADEMICO, ASIGNATURA_REFERENCIA, GRUPO_ID) REFERENCES GRUPOPORASIGNATURA (CURSOACADEMICO, ASIGNATURA_REFERENCIA, GRUPO_ID)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT NUMERIC(38), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
